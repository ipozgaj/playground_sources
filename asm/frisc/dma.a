; (C) 2004  Igor Pozgaj <ipozgaj@fly.srk.fer.hr>

VJ		`EQU	0FFFFFFFD
CT_LR		`EQU	0FFFFFFF8
CT_CR		`EQU	0FFFFFFF9
DMA_SRC		`EQU	0FFFFFFF0
DMA_DEST	`EQU	0FFFFFFF1
DMA_CNT		`EQU	0FFFFFFF2
DMA_CTRL	`EQU	0FFFFFFF3
DMA_START 	`EQU	0FFFFFFF4

	LOADL	R0, %D 50000
	STORE	R0, (CT_LR)
	LOADL	R0, VJ
	STORE	R0, (DMA_SRC)
	LOADL	R0, 100
	STORE	R0, (DMA_DEST)
	LOADL	R0, %D 100
	STORE	R0, (DMA_CNT)
	LOADL	R0, %B 0100
	STORE	R0, (DMA_CTRL)
        LOADL	R0, %B 10
	STORE	R0, (CT_CR)
	STORE	R0, (DMA_START)

	LOAD	R0, (CT_LR)
	SUB	%D 50000, R0, R0
	HALT
